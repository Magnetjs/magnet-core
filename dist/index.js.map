{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;kBAEwB,MAAM;;;;;;;;;;;;;;;;AAAf,SAAS,MAAM,CAAC,OAAO,EAAE;AACtC,MAAI,GAAG,GAAG,EAAE,CAAC;AACb,MAAI,MAAM,GAAG,EAAE,CAAC;;AAEhB,SAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;;AAEtB,MAAI,YAAY,8BAAG,SAAU,YAAY,CAAC,GAAG;QACvC,OAAO,EAMP,MAAM,kFACD,MAAM,EACT,IAAI;;;;;;AARN,mBAAO,GAAG,GAAG,CAAC,KAAK,EAAE;;AAEzB,gBAAI,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;AAC3B,qBAAO,GAAG,CAAC,OAAO,CAAC,CAAC;aACrB;;AAEG,kBAAM,GAAG,EAAE;;;;;;AACf,wDAAmB,OAAO,qGAAE;AAAnB,oBAAM;AACT,kBAAI,GAAG,IAAI,MAAM,CAAC,GAAG,CAAC;;AAE1B,kBAAI,IAAI,CAAC,KAAK,EAAE;AACd,sBAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;eAC3B;;AAED,kBAAI,IAAI,CAAC,KAAK,EAAE;AACd,sBAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;eACpC;aACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mBAEK,MAAM;;;iBAER,GAAG,CAAC,MAAM;;;;;;mBACN,YAAY,CAAC,GAAG,CAAC;;;;;;;OAvBE,YAAY;GAyBxC,CAAA,CAAC;;AAEF,+CAAG;6FAGQ,KAAK;;;;;;;mBAFR,YAAY,CAAC,OAAO,CAAC;;;;;;;oDAET,MAAM;;;;;;;;AAAf,iBAAK;;mBACN,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAEhB,EAAC,CACD,IAAI,CAAC,YAAY;AAChB,WAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;GAC1B,CAAC,CACD,KAAK,CAAC,UAAU,GAAG,EAAE;AACpB,WAAO,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;GAC1B,CAAC,CAAC;CACJ","file":"index.js","sourcesContent":["import co from 'co';\n\nexport default function Magnet(modules) {\n  let app = {};\n  let starts = [];\n\n  console.time('Ready');\n\n  let performTasks = function* performTasks(arr) {\n    let Modules = arr.shift();\n\n    if (!Array.isArray(Modules)) {\n      Modules = [Modules];\n    }\n\n    let setups = [];\n    for (let Module of Modules) {\n      let task = new Module(app);\n\n      if (task.setup) {\n        setups.push(task.setup());\n      }\n\n      if (task.start) {\n        starts.push(task.start.bind(task));\n      }\n    }\n\n    yield setups;\n\n    if (arr.length) {\n      yield performTasks(arr);\n    }\n  };\n\n  co(function* () {\n    yield performTasks(modules);\n\n    for (let start of starts) {\n      yield start();\n    }\n  })\n  .then(function () {\n    console.timeEnd('Ready');\n  })\n  .catch(function (err) {\n    console.error(err.stack);\n  });\n}\n"],"sourceRoot":"/source/"}